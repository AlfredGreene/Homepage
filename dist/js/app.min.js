function addListEventHandlers(e){$("."+e+" .listItem").click(function(){$(".listItem").removeClass("selected"),$(this).addClass("selected"),$(this).addClass("used");var e=$(this).data("url");""===e&&(e="nourl.php"),$("iframe").attr("src",e),$(".pageLinkToUrl").text(e).attr("href",e)}),$("."+e+" .title a").click(function(){$("iframe").attr("src","/welcome/"),$(".pageLinkToUrl").text(""),requestNewFeedItems()}),$("."+e+" .pin").click(function(e){e.stopImmediatePropagation();var t=$(this);$.ajax("/pin/"+$(this).data("pin-id")).done(function(e){"1"==e&&$(t).parent().toggleClass("pinned")})})}function requestNewFeedItems(){$.getJSON("/refresh/"+encodeURI($("body").data("refresh-date"))).done(function(e){var t=e.html.replace('<div class="list scroll">','<div class="Newlist">');$(".list").prepend(t),addListEventHandlers("Newlist"),$("body").data("refresh-date",e.refreshDate),clearCreateForm()}),console.log($("body").data("refresh-date"))}function clearCreateForm(){$("#createItem").find("input[type=text], textarea").val("")}function getUrlMetaData(){var e=$("#inputUrl").val();e.length>0&&$.ajax({method:"POST",url:"/meta/",data:{url:e}}).done(function(e){var t=$.parseJSON(e);$("#addTitle").val(t.title),$("#addDescription").val(t.description)})}function searchFeeds(e){$(".searchResults").html("").slideDown(),$.ajax("/search/"+e).done(function(e){var t=e.replace('<div class="list scroll">','<div class="NewSearchlist">');t=t.replace('<a href="/page/2" class="listItem jscroll-next">Next page</a>',""),$(".searchResults").prepend(t),addListEventHandlers("NewSearchlist")})}function saveNote(e){var t=$(e).attr("data-id"),n=$(e).attr("data-position"),s=$(e).val();$.ajax({method:"POST",url:"/note/save/",data:{id:t,position:n,note:s},beforeSend:function(){$(e).css("color","#303030")}}).done(function(){$(e).css("color","black")}).fail(function(){$(e).css("color","red")})}function openWelcomePage(){$("iframe").attr("src","/welcome/")}function addToChecklistFromSearch(e){var t=$(e).find("b").html();addToChecklist(t),$(e).html("<b>"+t+" added to checklist!"),$(".searchBox").val("")}function addToChecklist(e){postToChecklist({item:e})}function checkItem(e){var t=$(e).data("database-id"),n=$(e).is(":checked");postToChecklist({id:t,checked:n})}function postToChecklist(e){$.post("/checklist/add/",e).then(function(e){$(".checklists").html(e),$('.checklistAdder input[type="text"]').val(""),$(".checklistItem").on("click",function(){checkItem(this)})}).catch(function(){return alert("Updating checklist failed!"),!1})}function addMobileListeners(){$(".listItem").click(function(){return $(this).hasClass("Dumpert")?void window.frames[0].stop():($(".list").hide(),$(".title").hide(),$(".contentContainer").show(),$(".backButton").css("display","inline-block"),$(".pageLinkToUrl").show(),void $(".navbar").css("display","inline-block"))}),$(".backButton").click(function(){$(".list").show(),$(".title").show(),$(".contentContainer").hide(),$(".backButton").hide(),$(".pageLinkToUrl").hide(),$(".navbar").hide(),$("iframe").attr("src","about:blank")}),$(".listItem").hammer().on("swiperight",function(){var e=$(this).find(".pin");$.ajax("/pin/"+$(e).data("pin-id")).done(function(t){"1"==t&&$(e).parent().toggleClass("pinned")})}),$(".Dumpert").each(function(){var e=$(this).find(".listTitle").text(),t=$(this).data("url");$(this).find(".listTitle").html('<a class="listTitle" href="'+t+'" target="_blank">'+e+"</a>")})}function refreshPage(){var e=new Image,t=$.now();e.src="/screensaver/images/"+t+".jpg",e.onload=function(){$(".notActive").css("background-image",'url("/screensaver/images/'+t+'.jpg")'),switchBackgrounds()}}function switchBackgrounds(){$(".notActive").fadeIn(3e3),$(".active").fadeOut(3e3),$(".active, .notActive").toggleClass("active notActive")}function updateTime(){var e=new Date,t=e.getHours(),n=e.getMinutes();t<10&&(t="0"+t),n<10&&(n="0"+n),$(".currentTime").html(t+":"+n)}function updateWeather(){$(".screensaverWeatherContent").load("/weather/current/")}function showItems(){$(".activeNewsItem").slideToggle("slow"),$(".newsSource").slideToggle("slow"),$(".newsTitle").slideToggle("slow"),$(".newsDescription").slideToggle("slow"),$(".currentTime").slideToggle("slow")}function nextNewsItem(){hideNewsItem(),setTimeout(function(){showNextNewsItem()},1e3)}function hideNewsItem(){$(".newsSource").slideToggle("slow"),$(".newsTitle").slideToggle("slow"),$(".newsDescription").slideToggle("slow")}function showNextNewsItem(){currentNewsItem+=1,currentNewsItem>49&&(currentNewsItem=0),"undefined"!=typeof newsItems&&($(".newsSource").html(newsItems[currentNewsItem][0]).attr("class","newsSource newsBar"+newsItems[currentNewsItem][0]).slideToggle("slow"),$(".newsTitle").html(newsItems[currentNewsItem][1]).slideToggle("slow"),$(".newsDescription").html(newsItems[currentNewsItem][2]).slideToggle("slow"))}$(function(){$(".createButton").click(function(){$("#createItem").modal({fadeDuration:100})}),$(".submitFeedItem").click(function(){$.post("/add-item/",$("#createItem").serialize()).done(function(e){"Done"===e?($.modal.close(),requestNewFeedItems()):alert(e)}).fail(function(e){alert(e)})}),$(".weatherContent").load("/weather/detail/").on("click",function(){$(".note").slideToggle("slow"),$(".feedCounter").slideToggle("slow")}),$(".scroll").jscroll({padding:150,nextSelector:"a.jscroll-next:last",contentSelector:".listItem",callback:function(){addListEventHandlers("list"),"function"==typeof addMobileListeners&&addMobileListeners()}}),$(".parseUrlButton").click(function(){getUrlMetaData()}),$("#inputUrl").on("blur",function(){getUrlMetaData()}),addListEventHandlers("list"),$(".searchBox").on("keyup",function(){searchFeeds($(this).val()),addListEventHandlers("searchResults")}).on("click",function(){""!==$(this).val()&&$(".searchResults").slideDown()}).on("blur",function(){$(".searchResults").slideUp()}),$(".note").on("blur",function(){saveNote($(this))}),$(".specialTxt").each(function(){var e="peter",t="vdam",n=".nl",s="mail",i="@",a="to";$(this).html('<a href="'+s+a+":"+e+i+e+t+n+'">'+e+i+e+t+n+"</a>")}),$('.checklistAdder input[type="button"]').on("click",function(){addToChecklist($('.checklistAdder input[type="text"]').val())}),$(".checklistItem").on("click",function(){checkItem(this)})}),$(document).ready(function(){addMobileListeners()}),$(function(){setInterval(function(){setTimeout(function(){refreshPage()},5e3)},18e4),setInterval(function(){updateTime()},1e3),setInterval(function(){updateWeather()},3e5),setInterval(function(){nextNewsItem()},2e4),refreshPage(),updateWeather(),setTimeout(function(){showItems()},3e3)});var currentNewsItem=0;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJtb2JpbGUuanMiLCJzY3JlZW5zYXZlci5qcyJdLCJuYW1lcyI6WyJhZGRMaXN0RXZlbnRIYW5kbGVycyIsImNvbnRhaW5lciIsIiQiLCJjbGljayIsInJlbW92ZUNsYXNzIiwidGhpcyIsImFkZENsYXNzIiwidXJsIiwiZGF0YSIsImF0dHIiLCJ0ZXh0IiwicmVxdWVzdE5ld0ZlZWRJdGVtcyIsImUiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJwaW4iLCJhamF4IiwiZG9uZSIsInJlc3BvbnNlIiwicGFyZW50IiwidG9nZ2xlQ2xhc3MiLCJnZXRKU09OIiwiZW5jb2RlVVJJIiwiaHRtbCIsInJlcGxhY2UiLCJwcmVwZW5kIiwicmVmcmVzaERhdGUiLCJjbGVhckNyZWF0ZUZvcm0iLCJjb25zb2xlIiwibG9nIiwiZmluZCIsInZhbCIsImdldFVybE1ldGFEYXRhIiwiVXJsIiwibGVuZ3RoIiwibWV0aG9kIiwianNvbiIsInBhcnNlSlNPTiIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJzZWFyY2hGZWVkcyIsInNlYXJjaFF1ZXJ5Iiwic2xpZGVEb3duIiwic2F2ZU5vdGUiLCJlbCIsImlkIiwicG9zaXRpb24iLCJub3RlIiwiYmVmb3JlU2VuZCIsImNzcyIsImZhaWwiLCJvcGVuV2VsY29tZVBhZ2UiLCJhZGRUb0NoZWNrbGlzdEZyb21TZWFyY2giLCJ2YWx1ZSIsImFkZFRvQ2hlY2tsaXN0IiwicG9zdFRvQ2hlY2tsaXN0IiwiaXRlbSIsImNoZWNrSXRlbSIsIm5ld0NoZWNrZWRTdGF0ZSIsImlzIiwiY2hlY2tlZCIsInBvc3QiLCJ0aGVuIiwib24iLCJjYXRjaCIsImFsZXJ0IiwiYWRkTW9iaWxlTGlzdGVuZXJzIiwiaGFzQ2xhc3MiLCJ3aW5kb3ciLCJmcmFtZXMiLCJzdG9wIiwiaGlkZSIsInNob3ciLCJoYW1tZXIiLCJlYWNoIiwicmVmcmVzaFBhZ2UiLCJ0ZW1wSW1hZ2UiLCJJbWFnZSIsInRpbWUiLCJub3ciLCJzcmMiLCJvbmxvYWQiLCJzd2l0Y2hCYWNrZ3JvdW5kcyIsImZhZGVJbiIsImZhZGVPdXQiLCJ1cGRhdGVUaW1lIiwiZHQiLCJEYXRlIiwiaG91cnMiLCJnZXRIb3VycyIsIm1pbnV0ZXMiLCJnZXRNaW51dGVzIiwidXBkYXRlV2VhdGhlciIsImxvYWQiLCJzaG93SXRlbXMiLCJzbGlkZVRvZ2dsZSIsIm5leHROZXdzSXRlbSIsImhpZGVOZXdzSXRlbSIsInNldFRpbWVvdXQiLCJzaG93TmV4dE5ld3NJdGVtIiwiY3VycmVudE5ld3NJdGVtIiwibmV3c0l0ZW1zIiwibW9kYWwiLCJmYWRlRHVyYXRpb24iLCJzZXJpYWxpemUiLCJjbG9zZSIsImpzY3JvbGwiLCJwYWRkaW5nIiwibmV4dFNlbGVjdG9yIiwiY29udGVudFNlbGVjdG9yIiwiY2FsbGJhY2siLCJzbGlkZVVwIiwicDEiLCJwMyIsInAyIiwicDQiLCJwNSIsInA2IiwiZG9jdW1lbnQiLCJyZWFkeSIsInNldEludGVydmFsIl0sIm1hcHBpbmdzIjoiQUF1RkEsUUFBQUEsc0JBQUFDLEdBQ0FDLEVBQUEsSUFBQUQsRUFBQSxjQUFBRSxNQUFBLFdBQ0FELEVBQUEsYUFBQUUsWUFBQSxZQUNBRixFQUFBRyxNQUFBQyxTQUFBLFlBQ0FKLEVBQUFHLE1BQUFDLFNBQUEsT0FFQSxJQUFBQyxHQUFBTCxFQUFBRyxNQUFBRyxLQUFBLE1BQ0EsTUFBQUQsSUFBQUEsRUFBQSxhQUVBTCxFQUFBLFVBQUFPLEtBQUEsTUFBQUYsR0FDQUwsRUFBQSxrQkFBQVEsS0FBQUgsR0FBQUUsS0FBQSxPQUFBRixLQUdBTCxFQUFBLElBQUFELEVBQUEsYUFBQUUsTUFBQSxXQUNBRCxFQUFBLFVBQUFPLEtBQUEsTUFBQSxhQUNBUCxFQUFBLGtCQUFBUSxLQUFBLElBQ0FDLHdCQUdBVCxFQUFBLElBQUFELEVBQUEsU0FBQUUsTUFBQSxTQUFBUyxHQUNBQSxFQUFBQywwQkFDQSxJQUFBQyxHQUFBWixFQUFBRyxLQUNBSCxHQUFBYSxLQUFBLFFBQUFiLEVBQUFHLE1BQUFHLEtBQUEsV0FD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IiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgcGV0ZXJ2YW5kYW0gb24gMjYvMTAvMjAxNi5cbiAqL1xuJChmdW5jdGlvbigpIHtcbiAgICAkKCcuY3JlYXRlQnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJyNjcmVhdGVJdGVtJykubW9kYWwoe2ZhZGVEdXJhdGlvbjoxMDB9KTtcbiAgICB9KTtcblxuICAgICQoJy5zdWJtaXRGZWVkSXRlbScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkLnBvc3QoJy9hZGQtaXRlbS8nLCAkKCcjY3JlYXRlSXRlbScpLnNlcmlhbGl6ZSgpKVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhID09PSAnRG9uZScpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5tb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0TmV3RmVlZEl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGVydChkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKCcud2VhdGhlckNvbnRlbnQnKS5sb2FkKCcvd2VhdGhlci9kZXRhaWwvJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5ub3RlJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcbiAgICAgICAgJCgnLmZlZWRDb3VudGVyJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcbiAgICB9KTtcblxuICAgICQoJy5zY3JvbGwnKS5qc2Nyb2xsKHtcbiAgICAgICAgcGFkZGluZzogMTUwLFxuICAgICAgICBuZXh0U2VsZWN0b3I6ICdhLmpzY3JvbGwtbmV4dDpsYXN0JyxcbiAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLmxpc3RJdGVtJyxcbiAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYWRkTGlzdEV2ZW50SGFuZGxlcnMoJ2xpc3QnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYWRkTW9iaWxlTGlzdGVuZXJzID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvKiogZ2xvYmFsOiBhZGRNb2JpbGVMaXN0ZW5lcnMgKi9cbiAgICAgICAgICAgICAgICBhZGRNb2JpbGVMaXN0ZW5lcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgJCgnLnBhcnNlVXJsQnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGdldFVybE1ldGFEYXRhKCk7XG4gICAgfSk7XG5cbiAgICAkKCcjaW5wdXRVcmwnKS5vbignYmx1cicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBnZXRVcmxNZXRhRGF0YSgpO1xuICAgIH0pO1xuXG4gICBhZGRMaXN0RXZlbnRIYW5kbGVycygnbGlzdCcpO1xuXG4gICAgJCgnLnNlYXJjaEJveCcpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKCkge1xuICAgICAgIHNlYXJjaEZlZWRzKCQodGhpcykudmFsKCkpO1xuICAgICAgIGFkZExpc3RFdmVudEhhbmRsZXJzKCdzZWFyY2hSZXN1bHRzJyk7XG4gICAgfSkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9PSAnJykge1xuICAgICAgICAgICAgJCgnLnNlYXJjaFJlc3VsdHMnKS5zbGlkZURvd24oKTtcbiAgICAgICAgfVxuICAgIH0pLm9uKCdibHVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5zZWFyY2hSZXN1bHRzJykuc2xpZGVVcCgpO1xuICAgIH0pO1xuXG4gICAgJCgnLm5vdGUnKS5vbignYmx1cicsIGZ1bmN0aW9uKCkge1xuICAgICAgIHNhdmVOb3RlKCQodGhpcykpO1xuICAgIH0pO1xuXG4gICAgJCgnLnNwZWNpYWxUeHQnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcDEgPSAncGV0ZXInO1xuICAgICAgICB2YXIgcDMgPSAndmRhbSc7XG4gICAgICAgIHZhciBwMiA9ICcubmwnO1xuICAgICAgICB2YXIgcDQgPSAnbWFpbCc7XG4gICAgICAgIHZhciBwNSA9ICdAJztcbiAgICAgICAgdmFyIHA2ID0gJ3RvJztcbiAgICAgICAgJCh0aGlzKS5odG1sKCc8YSBocmVmPVwiJyArIHA0ICsgcDYgKyAnOicgKyBwMSArIHA1ICsgcDEgKyBwMyArIHAyICsgJ1wiPicgKyBwMSArIHA1ICsgcDEgKyBwMyArIHAyICsgJzwvYT4nKTtcbiAgICB9KTtcblxuICAgICQoJy5jaGVja2xpc3RBZGRlciBpbnB1dFt0eXBlPVwiYnV0dG9uXCJdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGFkZFRvQ2hlY2tsaXN0KCQoJy5jaGVja2xpc3RBZGRlciBpbnB1dFt0eXBlPVwidGV4dFwiXScpLnZhbCgpKTtcbiAgICB9KTtcblxuICAgICQoJy5jaGVja2xpc3RJdGVtJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgY2hlY2tJdGVtKHRoaXMpO1xuICAgIH0pO1xuXG59KTtcblxuZnVuY3Rpb24gYWRkTGlzdEV2ZW50SGFuZGxlcnMoY29udGFpbmVyKSB7XG4gICAgJCgnLicgKyBjb250YWluZXIgKyAnIC5saXN0SXRlbScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAkKCcubGlzdEl0ZW0nKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygndXNlZCcpO1xuXG4gICAgICAgIHZhciB1cmwgPSAkKHRoaXMpLmRhdGEoJ3VybCcpO1xuICAgICAgICBpZiAodXJsID09PSAnJykgeyB1cmwgPSAnbm91cmwucGhwJzsgfVxuXG4gICAgICAgICQoJ2lmcmFtZScpLmF0dHIoJ3NyYycsIHVybCk7XG4gICAgICAgICQoJy5wYWdlTGlua1RvVXJsJykudGV4dCh1cmwpLmF0dHIoJ2hyZWYnLCB1cmwpO1xuICAgIH0pO1xuXG4gICAgJCgnLicgKyBjb250YWluZXIgKyAnIC50aXRsZSBhJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJ2lmcmFtZScpLmF0dHIoJ3NyYycsICcvd2VsY29tZS8nKTtcbiAgICAgICAgJCgnLnBhZ2VMaW5rVG9VcmwnKS50ZXh0KCcnKTtcbiAgICAgICAgcmVxdWVzdE5ld0ZlZWRJdGVtcygpO1xuICAgIH0pO1xuXG4gICAgJCgnLicgKyBjb250YWluZXIgKyAnIC5waW4nKS5jbGljayhmdW5jdGlvbihlKSB7XG4gICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciBwaW4gPSAkKHRoaXMpO1xuICAgICAgICAkLmFqYXgoXCIvcGluL1wiICskKHRoaXMpLmRhdGEoJ3Bpbi1pZCcpKVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT0gJzEnKSB7XG4gICAgICAgICAgICAgICAgICAgICQocGluKS5wYXJlbnQoKS50b2dnbGVDbGFzcygncGlubmVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHJlcXVlc3ROZXdGZWVkSXRlbXMoKSB7XG4gICAgJC5nZXRKU09OKCcvcmVmcmVzaC8nICsgZW5jb2RlVVJJKCQoJ2JvZHknKS5kYXRhKCdyZWZyZXNoLWRhdGUnKSkpXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBodG1sID0gZGF0YS5odG1sLnJlcGxhY2UoJzxkaXYgY2xhc3M9XCJsaXN0IHNjcm9sbFwiPicsICc8ZGl2IGNsYXNzPVwiTmV3bGlzdFwiPicpO1xuICAgICAgICAgICAgJCgnLmxpc3QnKS5wcmVwZW5kKGh0bWwpO1xuICAgICAgICAgICAgYWRkTGlzdEV2ZW50SGFuZGxlcnMoJ05ld2xpc3QnKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5kYXRhKCdyZWZyZXNoLWRhdGUnLCBkYXRhLnJlZnJlc2hEYXRlKTtcbiAgICAgICAgICAgIGNsZWFyQ3JlYXRlRm9ybSgpO1xuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coJCgnYm9keScpLmRhdGEoJ3JlZnJlc2gtZGF0ZScpKTtcbn1cblxuZnVuY3Rpb24gY2xlYXJDcmVhdGVGb3JtKCkge1xuICAgICQoJyNjcmVhdGVJdGVtJykuZmluZChcImlucHV0W3R5cGU9dGV4dF0sIHRleHRhcmVhXCIpLnZhbChcIlwiKTtcbn1cblxuZnVuY3Rpb24gZ2V0VXJsTWV0YURhdGEoKSB7XG4gICAgdmFyIFVybCA9ICQoJyNpbnB1dFVybCcpLnZhbCgpO1xuXG4gICAgaWYgKFVybC5sZW5ndGggPiAwKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgdXJsOiBcIi9tZXRhL1wiLFxuICAgICAgICAgICAgZGF0YTogeyB1cmw6IFVybH1cbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKCBkYXRhICkge1xuICAgICAgICAgICAgICAgIHZhciBqc29uID0gJC5wYXJzZUpTT04oZGF0YSk7XG4gICAgICAgICAgICAgICAgJCgnI2FkZFRpdGxlJykudmFsKGpzb24udGl0bGUpO1xuICAgICAgICAgICAgICAgICQoJyNhZGREZXNjcmlwdGlvbicpLnZhbChqc29uLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2VhcmNoRmVlZHMoc2VhcmNoUXVlcnkpIHtcbiAgICAkKCcuc2VhcmNoUmVzdWx0cycpLmh0bWwoXCJcIikuc2xpZGVEb3duKCk7XG4gICAgJC5hamF4KCcvc2VhcmNoLycgKyBzZWFyY2hRdWVyeSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgdmFyIGh0bWwgPSBkYXRhLnJlcGxhY2UoJzxkaXYgY2xhc3M9XCJsaXN0IHNjcm9sbFwiPicsICc8ZGl2IGNsYXNzPVwiTmV3U2VhcmNobGlzdFwiPicpO1xuICAgICAgICAgICAgaHRtbCA9IGh0bWwucmVwbGFjZSgnPGEgaHJlZj1cIi9wYWdlLzJcIiBjbGFzcz1cImxpc3RJdGVtIGpzY3JvbGwtbmV4dFwiPk5leHQgcGFnZTwvYT4nLCAnJyk7XG4gICAgICAgICAgICAkKCcuc2VhcmNoUmVzdWx0cycpLnByZXBlbmQoaHRtbCk7XG4gICAgICAgICAgICBhZGRMaXN0RXZlbnRIYW5kbGVycygnTmV3U2VhcmNobGlzdCcpO1xuICAgICAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2F2ZU5vdGUoZWwpIHtcbiAgICB2YXIgaWQgPSAkKGVsKS5hdHRyKCdkYXRhLWlkJyk7XG4gICAgdmFyIHBvc2l0aW9uID0gJChlbCkuYXR0cignZGF0YS1wb3NpdGlvbicpO1xuICAgIHZhciBub3RlID0gJChlbCkudmFsKCk7XG5cbiAgICAkLmFqYXgoe1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICB1cmw6IFwiL25vdGUvc2F2ZS9cIixcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICAgICAgbm90ZTogbm90ZVxuICAgICAgICB9LFxuICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICQoZWwpLmNzcygnY29sb3InLCAnIzMwMzAzMCcpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKGVsKS5jc3MoJ2NvbG9yJywgJ2JsYWNrJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJChlbCkuY3NzKCdjb2xvcicsICdyZWQnKTtcbiAgICAgICAgfSk7XG59XG5cbmZ1bmN0aW9uIG9wZW5XZWxjb21lUGFnZSgpIHtcbiAgICAkKCdpZnJhbWUnKS5hdHRyKCdzcmMnLCAnL3dlbGNvbWUvJyk7XG59XG5cbmZ1bmN0aW9uIGFkZFRvQ2hlY2tsaXN0RnJvbVNlYXJjaChlbCkge1xuICAgIHZhciB2YWx1ZSA9ICQoZWwpLmZpbmQoJ2InKS5odG1sKCk7XG4gICAgYWRkVG9DaGVja2xpc3QodmFsdWUpO1xuICAgICQoZWwpLmh0bWwoJzxiPicgKyB2YWx1ZSArICcgYWRkZWQgdG8gY2hlY2tsaXN0IScpO1xuICAgICQoJy5zZWFyY2hCb3gnKS52YWwoJycpO1xufVxuXG5mdW5jdGlvbiBhZGRUb0NoZWNrbGlzdCh2YWx1ZSkge1xuICAgIHBvc3RUb0NoZWNrbGlzdCh7aXRlbTp2YWx1ZX0pO1xufVxuXG5mdW5jdGlvbiBjaGVja0l0ZW0oZWwpIHtcbiAgICB2YXIgaWQgPSAkKGVsKS5kYXRhKCdkYXRhYmFzZS1pZCcpO1xuICAgIHZhciBuZXdDaGVja2VkU3RhdGUgPSAkKGVsKS5pcygnOmNoZWNrZWQnKTtcblxuICAgIHBvc3RUb0NoZWNrbGlzdCh7XG4gICAgICAgIGlkOiBpZCxcbiAgICAgICAgY2hlY2tlZDogbmV3Q2hlY2tlZFN0YXRlXG4gICAgfSk7XG5cbn1cblxuZnVuY3Rpb24gcG9zdFRvQ2hlY2tsaXN0KGRhdGEpIHtcbiAgICAkLnBvc3QoXCIvY2hlY2tsaXN0L2FkZC9cIiwgZGF0YSkudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICQoJy5jaGVja2xpc3RzJykuaHRtbChkYXRhKTtcbiAgICAgICAgJCgnLmNoZWNrbGlzdEFkZGVyIGlucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCcnKTtcblxuICAgICAgICAkKCcuY2hlY2tsaXN0SXRlbScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2hlY2tJdGVtKHRoaXMpO1xuICAgICAgICB9KTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgYWxlcnQoJ1VwZGF0aW5nIGNoZWNrbGlzdCBmYWlsZWQhJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbn1cbiIsIi8qKlxuICogQ3JlYXRlZCBieSBwZXRlcnZhbmRhbSBvbiAwNy8xMS8yMDE2LlxuICovXG4kKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIGFkZE1vYmlsZUxpc3RlbmVycygpO1xufSk7XG5cbmZ1bmN0aW9uIGFkZE1vYmlsZUxpc3RlbmVycygpIHtcbiAgICAkKCcubGlzdEl0ZW0nKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnRHVtcGVydCcpKSB7XG4gICAgICAgICAgICB3aW5kb3cuZnJhbWVzWzBdLnN0b3AoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJy5saXN0JykuaGlkZSgpO1xuICAgICAgICAkKCcudGl0bGUnKS5oaWRlKCk7XG4gICAgICAgICQoJy5jb250ZW50Q29udGFpbmVyJykuc2hvdygpO1xuXG4gICAgICAgICQoJy5iYWNrQnV0dG9uJykuY3NzKCdkaXNwbGF5JywgJ2lubGluZS1ibG9jaycpO1xuICAgICAgICAkKCcucGFnZUxpbmtUb1VybCcpLnNob3coKTtcbiAgICAgICAgJCgnLm5hdmJhcicpLmNzcygnZGlzcGxheScsICdpbmxpbmUtYmxvY2snKTtcbiAgICB9KTtcblxuICAgICQoJy5iYWNrQnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICQoJy5saXN0Jykuc2hvdygpO1xuICAgICAgICAkKCcudGl0bGUnKS5zaG93KCk7XG4gICAgICAgICQoJy5jb250ZW50Q29udGFpbmVyJykuaGlkZSgpO1xuXG4gICAgICAgICQoJy5iYWNrQnV0dG9uJykuaGlkZSgpO1xuICAgICAgICAkKCcucGFnZUxpbmtUb1VybCcpLmhpZGUoKTtcbiAgICAgICAgJCgnLm5hdmJhcicpLmhpZGUoKTtcblxuICAgICAgICAkKCdpZnJhbWUnKS5hdHRyKCdzcmMnLCAnYWJvdXQ6YmxhbmsnKTtcbiAgICB9KTtcblxuICAgICQoJy5saXN0SXRlbScpLmhhbW1lcigpLm9uKFwic3dpcGVyaWdodFwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHBpbiA9ICQodGhpcykuZmluZCgnLnBpbicpO1xuICAgICAgICAkLmFqYXgoXCIvcGluL1wiICskKHBpbikuZGF0YSgncGluLWlkJykpXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PSAnMScpIHtcbiAgICAgICAgICAgICAgICAgICAgJChwaW4pLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCdwaW5uZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICQoJy5EdW1wZXJ0JykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHRpdGxlID0gJCh0aGlzKS5maW5kKCcubGlzdFRpdGxlJykudGV4dCgpO1xuICAgICAgICB2YXIgdXJsID0gJCh0aGlzKS5kYXRhKCd1cmwnKTtcbiAgICAgICAgJCh0aGlzKS5maW5kKCcubGlzdFRpdGxlJykuaHRtbCgnPGEgY2xhc3M9XCJsaXN0VGl0bGVcIiBocmVmPVwiJyArIHVybCArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj4nICsgdGl0bGUgKyAnPC9hPicpO1xuICAgIH0pO1xufVxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IHBldGVydmFuZGFtIG9uIDE4LzExLzIwMTYuXG4gKi9cbiQoZnVuY3Rpb24oKSB7XG4gICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZWZyZXNoUGFnZSgpO1xuICAgICAgICB9LCA1ICogMTAwMCk7XG4gICAgfSwgMyAqIDYwICogMTAwMCk7XG5cbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgdXBkYXRlVGltZSgpO1xuICAgIH0sIDEwMDApO1xuXG4gICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIHVwZGF0ZVdlYXRoZXIoKTtcbiAgICB9LCA1ICogNjAgKiAxMDAwKTtcblxuICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBuZXh0TmV3c0l0ZW0oKTtcbiAgICB9LCAyMCAqIDEwMDApO1xuXG4gICAgcmVmcmVzaFBhZ2UoKTtcbiAgICB1cGRhdGVXZWF0aGVyKCk7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICBzaG93SXRlbXMoKTtcbiAgICB9LCAzMDAwKTtcblxufSk7XG5cbi8qKiBnbG9iYWw6IGN1cnJlbnROZXdzSXRlbSAqL1xudmFyIGN1cnJlbnROZXdzSXRlbSA9IDA7XG5cbmZ1bmN0aW9uIHJlZnJlc2hQYWdlKCkge1xuICAgIC8qKiBnbG9iYWw6IEltYWdlICovXG4gICAgdmFyIHRlbXBJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgIHZhciB0aW1lID0gJC5ub3coKTtcbiAgICB0ZW1wSW1hZ2Uuc3JjID0gJy9zY3JlZW5zYXZlci9pbWFnZXMvJyArIHRpbWUgICsgJy5qcGcnO1xuICAgIHRlbXBJbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJCgnLm5vdEFjdGl2ZScpLmNzcygnYmFja2dyb3VuZC1pbWFnZScsICd1cmwoXCIvc2NyZWVuc2F2ZXIvaW1hZ2VzLycgKyB0aW1lICsgJy5qcGdcIiknKTtcbiAgICAgICAgc3dpdGNoQmFja2dyb3VuZHMoKTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBzd2l0Y2hCYWNrZ3JvdW5kcygpIHtcbiAgICAkKCcubm90QWN0aXZlJykuZmFkZUluKDMwMDApO1xuICAgICQoJy5hY3RpdmUnKS5mYWRlT3V0KDMwMDApO1xuICAgICQoJy5hY3RpdmUsIC5ub3RBY3RpdmUnKS50b2dnbGVDbGFzcygnYWN0aXZlIG5vdEFjdGl2ZScpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUaW1lKCkge1xuICAgIHZhciBkdCA9IG5ldyBEYXRlKCk7XG4gICAgdmFyIGhvdXJzID0gZHQuZ2V0SG91cnMoKTtcbiAgICB2YXIgbWludXRlcyA9IGR0LmdldE1pbnV0ZXMoKTtcblxuICAgIGlmIChob3VycyA8IDEwKSB7IGhvdXJzID0gJzAnICsgaG91cnM7IH1cbiAgICBpZiAobWludXRlcyA8IDEwKSB7IG1pbnV0ZXMgPSAnMCcgKyBtaW51dGVzOyB9XG5cbiAgICAkKCcuY3VycmVudFRpbWUnKS5odG1sKGhvdXJzICsgJzonICsgbWludXRlcyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVdlYXRoZXIoKSB7XG4gICAgJCgnLnNjcmVlbnNhdmVyV2VhdGhlckNvbnRlbnQnKS5sb2FkKCcvd2VhdGhlci9jdXJyZW50LycpO1xufVxuXG5mdW5jdGlvbiBzaG93SXRlbXMoKSB7XG4gICAgJCgnLmFjdGl2ZU5ld3NJdGVtJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcbiAgICAkKCcubmV3c1NvdXJjZScpLnNsaWRlVG9nZ2xlKCdzbG93Jyk7XG4gICAgJCgnLm5ld3NUaXRsZScpLnNsaWRlVG9nZ2xlKCdzbG93Jyk7XG4gICAgJCgnLm5ld3NEZXNjcmlwdGlvbicpLnNsaWRlVG9nZ2xlKCdzbG93Jyk7XG4gICAgJCgnLmN1cnJlbnRUaW1lJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcbn1cblxuZnVuY3Rpb24gbmV4dE5ld3NJdGVtKCkge1xuICAgIGhpZGVOZXdzSXRlbSgpO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHNob3dOZXh0TmV3c0l0ZW0oKTtcbiAgICB9LCAxMDAwKTtcbn1cblxuZnVuY3Rpb24gaGlkZU5ld3NJdGVtKCkge1xuICAgICQoJy5uZXdzU291cmNlJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcbiAgICAkKCcubmV3c1RpdGxlJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcbiAgICAkKCcubmV3c0Rlc2NyaXB0aW9uJykuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcbn1cblxuZnVuY3Rpb24gc2hvd05leHROZXdzSXRlbSgpIHtcbiAgICAvKiogZ2xvYmFsOiBjdXJyZW50TmV3c0l0ZW0gKi9cbiAgICBjdXJyZW50TmV3c0l0ZW0gPSBjdXJyZW50TmV3c0l0ZW0gKzE7XG4gICAgaWYgKGN1cnJlbnROZXdzSXRlbSA+IDQ5KSB7XG4gICAgICAgIGN1cnJlbnROZXdzSXRlbSA9IDA7XG4gICAgfVxuXG4gICAgLyoqIGdsb2JhbDogbmV3c0l0ZW1zICovXG4gICAgaWYgKHR5cGVvZihuZXdzSXRlbXMpID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgJCgnLm5ld3NTb3VyY2UnKS5odG1sKG5ld3NJdGVtc1tjdXJyZW50TmV3c0l0ZW1dWzBdKVxuICAgICAgICAuYXR0cignY2xhc3MnLCAnbmV3c1NvdXJjZSBuZXdzQmFyJyArIG5ld3NJdGVtc1tjdXJyZW50TmV3c0l0ZW1dWzBdKVxuICAgICAgICAuc2xpZGVUb2dnbGUoJ3Nsb3cnKTtcblxuICAgICQoJy5uZXdzVGl0bGUnKS5odG1sKG5ld3NJdGVtc1tjdXJyZW50TmV3c0l0ZW1dWzFdKS5zbGlkZVRvZ2dsZSgnc2xvdycpO1xuICAgICQoJy5uZXdzRGVzY3JpcHRpb24nKS5odG1sKG5ld3NJdGVtc1tjdXJyZW50TmV3c0l0ZW1dWzJdKS5zbGlkZVRvZ2dsZSgnc2xvdycpO1xufVxuIl19
